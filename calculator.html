<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ –ª—å–Ω–∞ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --soul: #F8F7F4;
            --shadow: #1A1A1A;
            --memory: #D4C4A8;
            --whisper: #E8E0D0;
            --gold: #B38B59;
            --amber: #C4A484;
            --earth: #9CAF88;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--soul);
            color: var(--shadow);
            line-height: 1.6;
        }

        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--soul);
            border-bottom: 1px solid var(--memory);
            padding: 1rem 2rem;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav h1 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--shadow);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--amber);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--gold);
        }

        .content {
            margin-top: 80px;
            padding: 2rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 600;
            color: var(--shadow);
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 500;
            color: var(--shadow);
            margin-bottom: 2rem;
        }

        h3 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 400;
            color: var(--gold);
            margin-bottom: 1.5rem;
        }

        .subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            color: var(--amber);
            margin-bottom: 3rem;
            font-weight: 300;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .expenses-panel {
            background: var(--soul);
            border: 1px solid var(--memory);
            border-radius: 12px;
            padding: 2rem;
        }

        .results-panel {
            background: var(--soul);
            border: 1px solid var(--memory);
            border-radius: 12px;
            padding: 2rem;
            position: sticky;
            top: 120px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid var(--whisper);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .expense-item:hover {
            border-color: var(--gold);
            background: var(--whisper);
        }

        .expense-item.disabled {
            opacity: 0.5;
            background: var(--whisper);
        }

        .expense-info {
            flex: 1;
        }

        .expense-name {
            font-weight: 600;
            color: var(--shadow);
            margin-bottom: 0.5rem;
        }

        .expense-description {
            font-size: 0.9rem;
            color: var(--amber);
            margin-bottom: 0.5rem;
        }

        .expense-risk {
            font-size: 0.8rem;
            color: var(--danger);
            font-weight: 500;
        }

        .expense-cost {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--gold);
            margin-left: 1rem;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            margin-left: 1rem;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--memory);
            transition: 0.3s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: var(--soul);
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--success);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .results-summary {
            text-align: center;
            margin-bottom: 2rem;
        }

        .profit-display {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .profit-positive {
            color: var(--success);
        }

        .profit-negative {
            color: var(--danger);
        }

        .profit-neutral {
            color: var(--gold);
        }

        .roi-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            color: var(--amber);
            margin-bottom: 2rem;
        }

        .risk-indicator {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .risk-low {
            background: var(--success);
            color: var(--soul);
        }

        .risk-medium {
            background: var(--warning);
            color: var(--shadow);
        }

        .risk-high {
            background: var(--danger);
            color: var(--soul);
        }

        .risk-very-high {
            background: #8e44ad;
            color: var(--soul);
        }

        .breakdown {
            margin-top: 2rem;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--whisper);
        }

        .breakdown-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .breakdown-label {
            color: var(--shadow);
        }

        .breakdown-value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--gold);
            font-weight: 500;
        }

        .warnings-panel {
            background: linear-gradient(45deg, #fff3cd, #ffeaa7);
            border: 1px solid #fdcb6e;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .warnings-panel h4 {
            color: #d63031;
            margin-bottom: 1rem;
        }

        .warning-item {
            color: var(--shadow);
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            position: relative;
        }

        .warning-item:before {
            content: "‚ö†Ô∏è";
            position: absolute;
            left: 0;
        }

        .preset-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: var(--gold);
            color: var(--soul);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: var(--amber);
        }

        .preset-btn.active {
            background: var(--success);
        }

        .volume-slider {
            margin: 2rem 0;
        }

        .volume-slider label {
            display: block;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .volume-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--memory);
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
        }

        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .expense-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .expense-cost {
                margin-left: 0;
            }
            
            .toggle-switch {
                margin-left: 0;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .expense-item {
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .profit-display {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav class="nav">
    <h1>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ –ª—å–Ω–∞</h1>
    <div class="nav-links">
        <a href="index.html">‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏</a>
        <a href="process.html">–ü—Ä–æ—Ü–µ—Å—Å</a>
        <a href="glossary.html">–ì–ª–æ—Å—Å–∞—Ä–∏–π</a>
    </div>
</nav>

<!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
<div class="content">
    <h1>üßÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ –ª—å–Ω–∞</h1>
    <div class="subtitle">–í–∫–ª—é—á–∞–π—Ç–µ –∏ –≤—ã–∫–ª—é—á–∞–π—Ç–µ —Å—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–∏–±—ã–ª—å –∏ —Ä–∏—Å–∫–∏</div>

    <!-- –ü—Ä–µ—Å–µ—Ç—ã -->
    <div class="preset-buttons">
        <button class="preset-btn active" onclick="loadPreset('full')">–ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞</button>
        <button class="preset-btn" onclick="loadPreset('minimal')">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</button>
        <button class="preset-btn" onclick="loadPreset('balanced')">–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</button>
        <button class="preset-btn" onclick="loadPreset('risky')">–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π</button>
    </div>

    <!-- –°–ª–∞–π–¥–µ—Ä –æ–±—ä–µ–º–∞ -->
    <div class="volume-slider">
        <label for="volume">–û–±—ä–µ–º –ø–æ—Å—Ç–∞–≤–∫–∏ (—Ç–æ–Ω–Ω):</label>
        <input type="range" id="volume" min="50" max="500" value="100" step="50">
        <input type="number" id="volumeNumber" value="100" min="50" max="500" class="volume-input">
    </div>

    <div class="calculator-grid">
        <!-- –ü–∞–Ω–µ–ª—å —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
        <div class="expenses-panel">
            <h3>üìã –°—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
            <p style="color: var(--amber); margin-bottom: 2rem;">–í–∫–ª—é—á–∞–π—Ç–µ/–≤—ã–∫–ª—é—á–∞–π—Ç–µ —Å—Ç–∞—Ç—å–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–∏–±—ã–ª—å</p>
            
            <div id="expensesList">
                <!-- –†–∞—Å—Ö–æ–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="results-panel">
            <h3>üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h3>
            
            <div class="results-summary">
                <div id="profitDisplay" class="profit-display profit-positive">+4 800 ‚Ç¨</div>
                <div id="roiDisplay" class="roi-display">ROI: 12,4% –∑–∞ 3 –º–µ—Å—è—Ü–∞</div>
                <div id="riskIndicator" class="risk-indicator risk-low">–†–∏—Å–∫: –ù–∏–∑–∫–∏–π</div>
            </div>

            <div class="breakdown">
                <h4>üìä –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è</h4>
                <div id="breakdownList">
                    <!-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>

            <div id="warningsPanel" class="warnings-panel" style="display: none;">
                <h4>‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h4>
                <div id="warningsList">
                    <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ –æ —Ä–∞—Å—Ö–æ–¥–∞—Ö
const expensesData = {
    purchase: {
        name: "–ó–∞–∫—É–ø–∫–∞ –ª—å–Ω–∞",
        description: "–ü–æ–∫—É–ø–∫–∞ –ª—å–Ω–∞ —É –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏—Ö —Ñ–µ—Ä–º–µ—Ä–æ–≤",
        costPerTon: 550,
        risk: "–ë–µ–∑ –∑–∞–∫—É–ø–∫–∏ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏",
        category: "–û—Å–Ω–æ–≤–Ω—ã–µ"
    },
    transport: {
        name: "–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞",
        description: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–∑ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ –≤ –ü–æ–ª—å—à—É",
        costPerTon: 80,
        risk: "–ì—Ä—É–∑ –º–æ–∂–µ—Ç –∑–∞—Å—Ç—Ä—è—Ç—å –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –∏–ª–∏ –ø–æ–≤—Ä–µ–¥–∏—Ç—å—Å—è",
        category: "–õ–æ–≥–∏—Å—Ç–∏–∫–∞"
    },
    customs: {
        name: "–¢–∞–º–æ–∂–µ–Ω–Ω—ã–µ —Å–±–æ—Ä—ã",
        description: "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø–æ—à–ª–∏–Ω—ã, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã",
        costPerTon: 30,
        risk: "–ó–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ —Ç–∞–º–æ–∂–Ω–µ, —à—Ç—Ä–∞—Ñ—ã –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã",
        category: "–¢–∞–º–æ–∂–Ω—è"
    },
    warehouse: {
        name: "–°–∫–ª–∞–¥—Å–∫–∏–µ —É—Å–ª—É–≥–∏",
        description: "–ü—Ä–∏–µ–º–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è –ø–∞—Ä—Ç–∏–π",
        costPerTon: 15,
        risk: "–ü–æ—Ä—á–∞ —Ç–æ–≤–∞—Ä–∞, –∫—Ä–∞–∂–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è",
        category: "–°–∫–ª–∞–¥"
    },
    insurance: {
        name: "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞",
        description: "Cargo Insurance + Trade Credit Insurance",
        costPerTon: 3,
        risk: "–ü–æ—Ç–µ—Ä—è –≥—Ä—É–∑–∞, –Ω–µ–ø–ª–∞—Ç–µ–∂ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è",
        category: "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ"
    },
    legal: {
        name: "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏",
        description: "–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏",
        costFixed: 1000,
        risk: "–ù–µ–≤—ã–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ",
        category: "–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ"
    },
    certification: {
        name: "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∏–Ω—Å–ø–µ–∫—Ü–∏—è",
        description: "SGS, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞, —Ñ–∏—Ç–æ—Å–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ",
        costPerTon: 10.3,
        risk: "–û—Ç–∫–∞–∑ –≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º",
        category: "–ö–∞—á–µ—Å—Ç–≤–æ"
    },
    banking: {
        name: "–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏",
        description: "–ö–æ–º–∏—Å—Å–∏–∏ –∑–∞ –ø–µ—Ä–µ–≤–æ–¥—ã, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤–∞–ª—é—Ç",
        costPercent: 0.5,
        risk: "–ó–∞–¥–µ—Ä–∂–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π, –≤—ã—Å–æ–∫–∏–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç",
        category: "–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ"
    },
    contingency: {
        name: "–ù–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã",
        description: "–†–µ–∑–µ—Ä–≤ –Ω–∞ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä—ã –∏ –∑–∞–¥–µ—Ä–∂–∫–∏",
        costPercent: 5,
        risk: "–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–¥–µ–ª–∫–∏",
        category: "–†–µ–∑–µ—Ä–≤"
    }
};

// –ü—Ä–µ—Å–µ—Ç—ã
const presets = {
    full: {
        name: "–ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞",
        enabled: Object.keys(expensesData),
        description: "–í—Å–µ —Ä–∞—Å—Ö–æ–¥—ã –≤–∫–ª—é—á–µ–Ω—ã, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
    },
    minimal: {
        name: "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã",
        enabled: ['purchase', 'transport'],
        description: "–¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, –≤—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏"
    },
    balanced: {
        name: "–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π",
        enabled: ['purchase', 'transport', 'customs', 'warehouse', 'insurance'],
        description: "–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ —Ä–∏—Å–∫–æ–≤"
    },
    risky: {
        name: "–†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π",
        enabled: ['purchase', 'transport', 'customs'],
        description: "–ú–∏–Ω–∏–º—É–º —Ä–∞—Å—Ö–æ–¥–æ–≤, –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏"
    }
};

let currentVolume = 100;
let enabledExpenses = [...presets.full.enabled];

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
document.addEventListener('DOMContentLoaded', function() {
    renderExpenses();
    updateResults();
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞ –æ–±—ä–µ–º–∞
    document.getElementById('volume').addEventListener('input', function(e) {
        currentVolume = parseInt(e.target.value);
        document.getElementById('volumeNumber').value = currentVolume;
        updateResults();
    });
    
    document.getElementById('volumeNumber').addEventListener('input', function(e) {
        currentVolume = parseInt(e.target.value);
        document.getElementById('volume').value = currentVolume;
        updateResults();
    });
});

// –†–µ–Ω–¥–µ—Ä —Ä–∞—Å—Ö–æ–¥–æ–≤
function renderExpenses() {
    const container = document.getElementById('expensesList');
    container.innerHTML = '';
    
    Object.entries(expensesData).forEach(([key, expense]) => {
        const isEnabled = enabledExpenses.includes(key);
        const cost = calculateExpenseCost(key, expense);
        
        const expenseElement = document.createElement('div');
        expenseElement.className = `expense-item ${isEnabled ? '' : 'disabled'}`;
        expenseElement.innerHTML = `
            <div class="expense-info">
                <div class="expense-name">${expense.name}</div>
                <div class="expense-description">${expense.description}</div>
                <div class="expense-risk">${expense.risk}</div>
            </div>
            <div class="expense-cost">${formatCurrency(cost)}</div>
            <label class="toggle-switch">
                <input type="checkbox" ${isEnabled ? 'checked' : ''} onchange="toggleExpense('${key}', this.checked)">
                <span class="slider"></span>
            </label>
        `;
        
        container.appendChild(expenseElement);
    });
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞
function toggleExpense(key, enabled) {
    if (enabled) {
        if (!enabledExpenses.includes(key)) {
            enabledExpenses.push(key);
        }
    } else {
        enabledExpenses = enabledExpenses.filter(k => k !== key);
    }
    
    renderExpenses();
    updateResults();
}

// –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–∞—Å—Ö–æ–¥–∞
function calculateExpenseCost(key, expense) {
    if (expense.costPerTon) {
        return expense.costPerTon * currentVolume;
    } else if (expense.costFixed) {
        return expense.costFixed;
    } else if (expense.costPercent) {
        const baseCost = 550 * currentVolume; // –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫—É–ø–∫–∏
        return (baseCost * expense.costPercent) / 100;
    }
    return 0;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
function updateResults() {
    const totalRevenue = 790 * currentVolume;
    const totalExpenses = calculateTotalExpenses();
    const profit = totalRevenue - totalExpenses;
    const roi = (profit / totalExpenses) * 100;
    const riskLevel = calculateRiskLevel();
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏
    const profitDisplay = document.getElementById('profitDisplay');
    profitDisplay.textContent = formatCurrency(profit);
    profitDisplay.className = `profit-display ${profit > 0 ? 'profit-positive' : profit < 0 ? 'profit-negative' : 'profit-neutral'}`;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ROI
    document.getElementById('roiDisplay').textContent = `ROI: ${roi.toFixed(1)}% –∑–∞ 3 –º–µ—Å—è—Ü–∞`;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞
    const riskIndicator = document.getElementById('riskIndicator');
    riskIndicator.textContent = `–†–∏—Å–∫: ${riskLevel.name}`;
    riskIndicator.className = `risk-indicator risk-${riskLevel.class}`;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
    updateBreakdown(totalRevenue, totalExpenses, profit);
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
    updateWarnings();
}

// –†–∞—Å—á–µ—Ç –æ–±—â–∏—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
function calculateTotalExpenses() {
    let total = 0;
    enabledExpenses.forEach(key => {
        const expense = expensesData[key];
        total += calculateExpenseCost(key, expense);
    });
    return total;
}

// –†–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞
function calculateRiskLevel() {
    const missingCritical = ['purchase', 'transport'].some(key => !enabledExpenses.includes(key));
    if (missingCritical) {
        return { name: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π', class: 'very-high' };
    }
    
    const missingImportant = ['customs', 'warehouse', 'insurance'].some(key => !enabledExpenses.includes(key));
    if (missingImportant) {
        return { name: '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π', class: 'high' };
    }
    
    const missingRecommended = ['legal', 'certification'].some(key => !enabledExpenses.includes(key));
    if (missingRecommended) {
        return { name: '–í—ã—Å–æ–∫–∏–π', class: 'medium' };
    }
    
    return { name: '–ù–∏–∑–∫–∏–π', class: 'low' };
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
function updateBreakdown(revenue, expenses, profit) {
    const container = document.getElementById('breakdownList');
    container.innerHTML = '';
    
    const items = [
        { label: '–í—ã—Ä—É—á–∫–∞', value: revenue },
        { label: '–†–∞—Å—Ö–æ–¥—ã', value: expenses },
        { label: '–ü—Ä–∏–±—ã–ª—å', value: profit }
    ];
    
    items.forEach(item => {
        const element = document.createElement('div');
        element.className = 'breakdown-item';
        element.innerHTML = `
            <span class="breakdown-label">${item.label}</span>
            <span class="breakdown-value">${formatCurrency(item.value)}</span>
        `;
        container.appendChild(element);
    });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
function updateWarnings() {
    const warnings = [];
    
    if (!enabledExpenses.includes('purchase')) {
        warnings.push('–ë–µ–∑ –∑–∞–∫—É–ø–∫–∏ –ª—å–Ω–∞ —Å–¥–µ–ª–∫–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞');
    }
    
    if (!enabledExpenses.includes('transport')) {
        warnings.push('–ì—Ä—É–∑ –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é');
    }
    
    if (!enabledExpenses.includes('customs')) {
        warnings.push('–ì—Ä—É–∑ –∑–∞—Å—Ç—Ä—è–Ω–µ—Ç –Ω–∞ —Ç–∞–º–æ–∂–Ω–µ');
    }
    
    if (!enabledExpenses.includes('warehouse')) {
        warnings.push('–ù–µ–∫—É–¥–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ —Ö—Ä–∞–Ω–∏—Ç—å –≥—Ä—É–∑');
    }
    
    if (!enabledExpenses.includes('insurance')) {
        warnings.push('–†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –≥—Ä—É–∑–∞ –∏ –Ω–µ–ø–ª–∞—Ç–µ–∂–∞');
    }
    
    if (!enabledExpenses.includes('legal')) {
        warnings.push('–†–∏—Å–∫ –Ω–µ–≤—ã–≥–æ–¥–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤');
    }
    
    if (!enabledExpenses.includes('certification')) {
        warnings.push('–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π');
    }
    
    const warningsPanel = document.getElementById('warningsPanel');
    const warningsList = document.getElementById('warningsList');
    
    if (warnings.length > 0) {
        warningsList.innerHTML = warnings.map(warning => 
            `<div class="warning-item">${warning}</div>`
        ).join('');
        warningsPanel.style.display = 'block';
    } else {
        warningsPanel.style.display = 'none';
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Å–µ—Ç–∞
function loadPreset(presetKey) {
    const preset = presets[presetKey];
    enabledExpenses = [...preset.enabled];
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    renderExpenses();
    updateResults();
}

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã
function formatCurrency(amount) {
    return new Intl.NumberFormat('de-DE', {
        style: 'currency',
        currency: 'EUR',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
    }).format(amount);
}
</script>

</body>
</html>
